<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>$ ./vbergeron.dev</title>
    <link href="https://vbergeron.dev/blog" />
    <link type="application/atom+xml" rel="self" href="https://vbergeron.dev/blog/feed.atom" />
    <updated>2024-07-12T19:56:01+00:00</updated>
    <id>https://vbergeron.dev/blog/feed.atom</id>
    <author>
        <name>Vincent Bergeron</name>
    </author>
                <entry>
    <id>https://vbergeron.dev/blog/simplify-post-put-patch-and-delete-actions-in-laravel-using-blade-components</id>
    <link type="text/html" rel="alternate" href="https://vbergeron.dev/blog/simplify-post-put-patch-and-delete-actions-in-laravel-using-blade-components" />
    <title>Simplify POST, PUT, PATCH and DELETE Actions in Laravel using Blade components</title>
    <published>2024-07-12T00:00:00+00:00</published>
    <updated>2024-07-12T00:00:00+00:00</updated>
    <author>
        <name>Vincent Bergeron</name>
    </author>
    <summary type="html">When we create a link on a page to redirect the user to another page, it uses a GET request. However, if you want a user to click on a link that executes a DELETE request (e.g., &lt;code&gt;DELETE /posts/1&lt;/code&gt;), you will need a form to handle that for you.......</summary>
    <content type="html"><![CDATA[
        <p>When we create a link on a page to redirect the user to another page, it uses a GET request. However, if you want a user to click on a link that executes a DELETE request (e.g., <code>DELETE /posts/1</code>), you will need a form to handle that for you. This is because if your route definition uses the <code>DELETE</code> verb, a user cannot visit that page from the URL as they would when visiting a normal page.</p>

<p>If you are building a backend application, chances are you have already created forms like this before:</p>

<pre><code class="language-html">&lt;form action="/posts/1" method="POST"&gt;
    @csrf
    @method('DELETE')
    &lt;button type="submit"&gt;Delete post&lt;/button&gt;
&lt;/form&gt;
</code></pre>

<p>And thatâ€™s totally fine. But over time, I found that it was taking up too much space in my HTML code, and a better idea came to mind:</p>

<pre><code class="language-html">&lt;x-action-button method="DELETE" action="/posts/1"&gt;
    Delete post
&lt;/x-action-button&gt;

&lt;!-- action-button.blade.php --&gt;
@props(['action', 'method' =&gt; 'POST'])
&lt;form action="{{ $action }}" method="POST"&gt;
    @csrf
    @method($method)
    &lt;button type="submit"&gt;{{ $slot }}&lt;/button&gt;
&lt;/form&gt;
</code></pre>

<p>Behind the scenes, the Blade component generates the same code as above, but now we can achieve the same result using fewer lines of code.</p>

<p>It's not impressive, I admit. Iâ€™m sure many of you already have such a component in your projects. However, this sparked an idea for further improvement. What if we could, if desired, ask the user to confirm their password in a modal before the form is submitted? How would we do that using our favorite tools (Livewire, Alpine.js, Blade components) with a very minimal amount of JavaScript code? Well, I had to create this recently and will discuss it further in the next post ðŸ™‚</p>
    ]]></content>
</entry>
            <entry>
    <id>https://vbergeron.dev/blog/ways-to-check-if-the-user-is-logged-in-or-not</id>
    <link type="text/html" rel="alternate" href="https://vbergeron.dev/blog/ways-to-check-if-the-user-is-logged-in-or-not" />
    <title>Ways to Check if the User is Logged In or Not</title>
    <published>2024-07-11T00:00:00+00:00</published>
    <updated>2024-07-11T00:00:00+00:00</updated>
    <author>
        <name>Vincent Bergeron</name>
    </author>
    <summary type="html">In Laravel, there are many ways to check whether a user is logged in. In this post, I will demonstrate my favorite methods for performing these checks. A lot of people use &lt;code&gt;auth()-&amp;gt;user()&lt;/code&gt;, but Laravel offers us other methods to avoid using......</summary>
    <content type="html"><![CDATA[
        <p>In Laravel, there are many ways to check whether a user is logged in. In this post, I will demonstrate my favorite methods for performing these checks. A lot of people use <code>auth()-&gt;user()</code>, but Laravel offers us other methods to avoid using negation.</p>

<h3>Checking if the User is Logged In</h3>

<p>Although some people might tend to use <code>auth()-&gt;user()</code>, I prefer <code>check</code> as it returns a boolean.</p>

<pre><code class="language-php">&lt;?php

if (auth()-&gt;check()) {
    // The user is logged in
}

// You can also use the following, which does the same thing as `check`
if (auth()-&gt;hasUser()) {
    // The user is logged in
}
</code></pre>

<h3>Checking if the User is Not Logged In</h3>

<p>I prefer this over using <code>!auth()-&gt;check()</code> or <code>auth()-&gt;user() === null</code> because <code>guest</code> clearly indicates that the user is not recognized by the system.</p>

<pre><code class="language-php">&lt;?php

if (auth()-&gt;guest()) {
    // The user is not logged in
}
</code></pre>

<p>I try to limit my use of <code>auth()-&gt;user()</code> to situations where I need the current user to ensure my code is as clean as possible and easy to understand by avoiding negation in my conditionals.</p>

<p>My posts are short for now. I am trying to get used to writing and hope to be able to write longer content in the future, but I hope it is still useful to you. ðŸ™‚</p>
    ]]></content>
</entry>
            <entry>
    <id>https://vbergeron.dev/blog/how-i-test-laravel-middlewares-in-isolation</id>
    <link type="text/html" rel="alternate" href="https://vbergeron.dev/blog/how-i-test-laravel-middlewares-in-isolation" />
    <title>How I test Laravel Middlewares in isolation</title>
    <published>2024-07-10T00:00:00+00:00</published>
    <updated>2024-07-10T00:00:00+00:00</updated>
    <author>
        <name>Vincent Bergeron</name>
    </author>
    <summary type="html">Not so long ago, a colleague of mine showed me a method to test middlewares that totally changed how I test them now.

For a long time, I tested middlewares by creating a fake Laravel request, instantiating the middleware, and calling the `handle method......</summary>
    <content type="html"><![CDATA[
        <p>Not so long ago, a colleague of mine showed me a method to test middlewares that totally changed how I test them now.</p>

<p>For a long time, I tested middlewares by creating a fake Laravel request, instantiating the middleware, and calling the `handle method with my fake $request object. This approach was working but caused some problems, such as handling an authenticated user or adding POST data. This required a deep understanding of Laravel requests, which is beneficial but added complexity to writing tests.</p>

<p>Luckily for us, there's an easier way to do it. The method consists of registering a fake route and attaching a middleware to it in the test itself.</p>

<pre><code class="language-php">&lt;?php

#[Test]
public function non_admin_gets_a_forbidden_response(): void
{
    $user = User::factory()-&gt;create(['is_admin' =&gt; false]);

    Route::get('/foo', fn(): Response =&gt; response('OK'))
        -&gt;middleware(AuthorizeAdmin::class);

    $this-&gt;actingAs($user)
        -&gt;get('/foo')
        -&gt;assertForbidden();
}
</code></pre>

<p>This way, we are still testing the middleware in isolation, and we get to use Laravel's built-in get method instead of calling the handle method on the middleware ourselves.</p>
    ]]></content>
</entry>
            <entry>
    <id>https://vbergeron.dev/blog/welcome-to-vbergeron-dev</id>
    <link type="text/html" rel="alternate" href="https://vbergeron.dev/blog/welcome-to-vbergeron-dev" />
    <title>Welcome to vbergeron.dev!</title>
    <published>2024-07-09T00:00:00+00:00</published>
    <updated>2024-07-09T00:00:00+00:00</updated>
    <author>
        <name>Vincent Bergeron</name>
    </author>
    <summary type="html">Welcome to my personal website. Creating a personal website has been on my mind for ages, but I always procrastinated.

On this website, you can expect some blog posts that I&#039;ll write as I come across interesting things while developing software at work.......</summary>
    <content type="html"><![CDATA[
        <p>Welcome to my personal website. Creating a personal website has been on my mind for ages, but I always procrastinated.</p>

<p>On this website, you can expect some blog posts that I'll write as I come across interesting things while developing software at work. Hopefully, I'll have some great things to share soon.</p>
    ]]></content>
</entry>
    </feed>
